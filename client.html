<html>
<head>
<link rel="stylesheet" type="text/css" href="css/docstyle.css">
<title>A Trubanc Web Client</title>
</head>
<body>
<h1>A Trubanc Web Client</h1>

<p>
I have written a <a href="./">Trubanc</a> web client, mostly as an
example of how to use the
<a href="viewtext.php?file=lib%2Fclient.php&search=&numbers=Yes">
client API</a>, but it's also a useful tool for maintaining multiple
Trubanc accounts on multiple Trubanc servers. This page uses sampled
screen-shots from the client to teach you how to use it. You can
follow those links within the text, or simply go to
<a href="./client/">Trubanc.com/client</a> to create a new account.
</p>

<p>
If you're interested in technical details of what goes on behind the
scenes, this page is organized in about the same way as
<a href="plain-english.html">
Trubanc in Plain English</a>.

<p>
Disclaimer: This site has a fully-functional Trubanc client and
server, but you wouldn't want to store any real money here. First off,
you enter your passphrase into the client, unencrypted, so it's
visible to anyone who can see your web traffic. You COULD install the
client on your own computer and get rid of that problem, but the
Trubanc server on this machine is under development, so I may
occasionally break things. Plus, it's hosted on a machine in Arizona,
under the watchful guns of the United States government. They have a
nasty habit of deciding to steal people's property, because of made up
"crimes" of "money laundering", or "operating a money tranfer service
without a license" or "tax evasion". I hope that there will one day
soon be many real Trubanc servers to choose from, hosted outside of
the influence of the US government, and backed up daily to prevent
lossage. For now, though, please use this site only to become
accustomed to Trubanc, and to help me test it.
</p>

<span class="summary-header">Note</span>
<p id="summary">
If you just want to learn the Trubanc web client by doing, follow the
directions in the gray boxes titled "Summary".
</p>

<h2>Opening an Account</h2>

<p>
When you first go to the client web page, you'll see the
<a href="demo/">Login screen</a>. Once you've created an account,
simply enter your passphrase and press the "Login" key (or the "Enter"
or "Return" key on your keyboard). But first, you need to create
public key pair.
</p>

<p>
Trubanc uses
<a href="http://www.pgpi.org/doc/pgpintro/">
public key</a>
<a href="http://en.wikipedia.org/wiki/Public-key_cryptography">
cryptography</a> to identify you in all communication with the server,
and to ensure that the server you reach over the internet today is the
same one you reached yesterday. With Trubanc, your private key,
stored, encrypted with your passphrase, on the machine that hosts the
client, <i>is</i> your identity. Guard it well. And if you're
connecting to a real Trubanc server, install the client on your own
machine. Don't use a public web client, like the one on this
site. Protect your passphrase like your gold. If somebody gets it, and
your passphrase, they are <i>you</i> as far as a Trubanc server is
concerned. But without it, <i>nobody</i> can impersonate you.
</p>

<p>
To create your identity, you must first pick a passphrase. This should
be a longish sequence of words that you can remember, but that it
would be unlikely for anyone to guess. It's best to use your memory,
not a piece of paper, to remember your passphrase. Pick a good one,
and don't forget it. If you do, you've lost your identity and access
to any assets stored in accounts keyed to it. Unless you picked a
really easy passphrase, nobody can recover it for you. That's a good
thing.
</p>

<p>
In order to protect this web site from spammers, you'll also need to
enter an "Invitation token". This is a 40-character string that I'll
send to you if you ask. Email billstclair at gmail dot com. Or Skype
billstclair.
</p>

<p>
Enter your passphrase twice, once in the "Passphrase" field, and again
in the "Verification" field. Enter the "Invitation token". Pick a "Key
size". RSA Labs
<a href="http://www.rsa.com/rsalabs/node.asp?id=2004">thinks</a> that
a key size of 3072 bits should be secure until beyond the year
2031. So that's the default. Smaller sizes are a little faster to
generate, and use, but only a little. It hardly matters for a key that
you'll only be using on this site to play with the interface. Finally,
press the "Create account" button.
</p>

<span class="summary-header">Summary</span>
<ul id="summary">
<li>Ask billstclair at gmail dot com for an invitation token</li>
<li>Pick a passphrase</li>
<li>Go to
<a href="client/">trubanc.com/client</a></li>
<li>Enter your "Passphrase" and "Verification"</li>
<li>Enter the "Invitation token"</li>
<li>Press the "Create account" button</li>
</ul>

<h2>Adding a Bank</h2>

<p>
The
<a href="demo/banks.html">
Banks screen</a> will be your first landing spot after creating a new
account. Until you've registered at a bank, you can't do much. It
costs "usage tokens" to join a bank. Somebody has to give them or sell
them to you. The bank at this site charges 10 usage tokens to create
an account, and 1 token for each server file your account uses. In
order to get some tokens, you'll have to ask me to fund your
account. Use the contact info above to send me the long string of hex
digits (0-9 and a-f) that you see after "Your ID". I'll gift you 100
usage tokens ("Trubanc Asset Tokens") and 10 "Bill Fake GoldGrams", so
you can play. I'll be creating bearer certificates pretty soon, which
will take the place of the invitation token and of this second
contact. You'll be able to forge them for your friends, if you have
enough usage tokens.
</p>

<p>
After I've notified you that I've funded your account, enter
"http://trubanc.com" as the "Bank URL", and, if you want, an "Account
Name". That name will be part of your ID at the bank. Anybody who
knows your ID and has an account will see it. There is currently no
way to change it, but I may add that, if there's demand. Press the
"Add Bank" button, and you should be taken to the
<a href="demo/balance.html">
Balance screen</a>.
</p>

<span class="summary-header">Summary</span>
<ul id="summary">
<li>Send "Your ID" to billstclair at gmail dot com, and ask for usage
tokens and fake GoldGrams</li>
<li>Go to the
<a href="client/?cmd=banks">Banks screen</a></li>
<li>Enter "http://trubanc.com" as the "Bank URL"</li>
<li>Enter an "Account Name", if you want to identify yourself with
other than your ID</li>
<li>Press the "Add Bank" button</li>
</ul>

<h2>Receiving Assets</h2>

<p>
The
<a href="demo/balance.html">Balance screen</a> is where you spend most
of your quality Trubanc time. It lets you see spends from others that
you haven't yet acknowledged, spends from yourself that the recipient
has acknowledged and you haven't yet completed, and your current
balances in all the assets you possess. It also has a "Show raw
balance" link, which brings up the
<a href="demo/rawbalance.html">
raw balance screen</a>. This shows the low-level encodings of the
signed and countersigned messages in your inbox, outbox, and
balances. Unless you're a Trubanc developer, you probably won't need
to look at this much.
</p>

<p>
After you add a new bank, you'll see at least two spends. One will be
from your sponsor, of enough usage tokens to cover the registration
fee. And the other will be a negative spend from the bank for that
registration fee. In Trubanc, the bank can't simply change your
balance behind your back. All balances and spends are signed by you
and countersigned by the bank. So in order to change your balance, you
must explicity make or accept spends. If someone spends assets to you
that you don't want, e.g. to purchase something that you no longer
sell, you can choose to reject that spend.
</p>

<p>
A Trubanc transaction has three steps:
</p>
<ol>
<li>A makes a spend to B.</li>
<li>B accepts or rejects the spend.</li>
<li>A closes the transaction.</li>
</ol>

<p>
The "<b>=== Inbox ===</b>" section of the balance screen has six
columns:
<ol>
<li><b>Request:</b> this is "Spend" for spends other people made to you, or
  "Accept" or "Reject" for acknowledgements of spends you made to
  others.</li>
<li><b>From:</b> This contains the name or ID of the other person. If
  you've given him a nickname on the
<a href="demo/contacts.html">Contacts screen</a>, that will appear. If
he also has an account name, that will appear in parentheses. If the
other person is not amongst your contacts, an "Add contact" checkbox
will allow you to add him.</li>
<li><b>Amount:</b> The amount that was spent in this transaction</li>
<li><b>Note:</b> The note in the original spend for this
  transaction. This is your note for acknowledgement lines.</li>
<li><b>Action:</b> the action you want to perform on this line when
  you press the "Process Inbox" button.</li>
<li><b>Reply:</b> you may type a reply here for spends, and you'll see
  the other person's reply here for acknowledgements of your spends.</li>
</ol>

<p>
To accept or reject or skip a spend, select what you want to do for
each "Action" column. To prevent the server database from filling up,
you're not allowed to do a new spend until you've cleared your inbox,
but you can keep some spends around until then by skipping them.
</p>

<p>
To remove a spend acknowledgement from your inbox, check the "Remove"
box in its "Action" column.
</p>

<p>
Click the "Process Inbox" button to perform the corresponding "Action"
to each row.
</p>

<span class="summary-header">Summary</span>
<ul id="summary">
<li>Go to the
<a href="demo/balance.html">
Balance screen</a>.
<li>In the "Action" column, select an action for each spend and unclick
  the "Remove" boxes for acknowledgements you wish to keep.</li>
<li>Type a "Reply" for each accepted or rejected spend that needs
  one.</li>
<li>Click the "Process Inbox" button</li>
</ul>

<h2>Adding Contacts</h2>

<h2>Spending Assets</h2>

<h2>Closing a Transaction</h2>

<h2>Preventing Spam</h2>

<p>
Since a spend requires two files, an outbox entry for the spender and
an inbox entry for the recipient, the spender is charged two usage
tokens to make the spend. That pays the bank for disk space (storage
fees and non-refundable transaction fees will come soon). If the
recipient accepts the spend, the spender will get those usage tokens
back when he closes the transaction. If the recipient rejects the
spend, he, not the spender, gets the usage tokens.
</p>

<p>
A zero spend, with an attached note is very similar to an email. If it
were free, spammers would be able to fill your Trubanc inbox with
garbage. Since rejecting that spam message will cost the spammer two
tokens, it will cost him money to keep doing it. This should
discourage spam. I'll eventually add a feature where you can choose to
give back the usage tokens with a rejected spend. Until then, you'll
need to explicitly spend them back, except to spammers.
</p>

<h2>Issuing Assets</h2>

<h2>Multiple Sub-Accounts</h2>

<p>To be done</p>

<h2>Getting Information</h2>

<h2>Cancelling a Spend</h2>

<p>To be done</p>

<p>Copyright &copy; 2008 Bill St. Clair, All Rights Reserved</p>

</body>
</html>
